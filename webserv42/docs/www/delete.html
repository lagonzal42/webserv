<!-- <!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>webserv</title>
	<style>
		body {
			font-family: Arial, sans-serif;
			margin: 0;
			padding: 0;
			background-color: #f0f0f0;
		}
		header {
			background-color: #333;
			color: #fff;
			padding: 20px;
			text-align: center;
		}
		nav {
			background-color: #444;
			padding: 10px;
			text-align: center;
		}
		nav a {
			color: #fff;
			text-decoration: none;
			padding: 10px;
		}
		nav a:hover {
			background-color: #555;
		}
		section {
			padding: 20px;
		}
		footer {
			background-color: #333;
			color: #fff;
			padding: 10px;
			text-align: center;
			position: fixed;
			bottom: 0;
			width: 100%;
		}
    </style>
</head>
<body>
	<header>
		<h1>Ezabatu fitxategia</h1>
	</header>
	<nav>
		<a href="../index.html">Return to Home</a>
	</nav>
	<section>
		<h2>About This Page</h2>
		<p>Select a file from the <code>./docs/upload/</code> directory to delete.</p>
	</section>
	<section>
		<form id="deleteForm">
			<label for="file">Enter filename to delete:</label>
			<input type="text" id="file" name="filename" placeholder="example.txt" required>
			<input type="button" value="Delete" onclick="deleteFile()">
		</form>
		<p id="response"></p>
	</section>
	<footer>
		<p>&copy; 2024 webserv. All rights reserved.</p>
	</footer>

	<script>
		async function deleteFile() {
			const filename = document.getElementById('file').value;
			const responseElement = document.getElementById('response');
	
			if (!filename) {
				responseElement.textContent = 'Please enter a filename.';
				return;
			}
	
			try {
				const response = await fetch('/upload/' + encodeURIComponent(filename), {
					method: 'DELETE',
					headers: {
						'Content-Type': 'application/json'
					}
				});
	
				if (response.ok) {
					const result = await response.text();
					// If the response is successful, display a success message
					responseElement.textContent = 'File deleted successfully.' + result;
					responseElement.style.color = 'green';
				} else {
					// If the response is not successful, display an error message
					const result = await response.text();
					responseElement.textContent = 'Error: ' + result;
					responseElement.style.color = 'red';
				}
			} catch (error) {
				responseElement.textContent = 'Error: ' + error.message;
				responseElement.style.color = 'red';
			}
		}
	</script>
</body>
</html> -->

<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>webserv</title>
	<style>
		body {
			font-family: Arial, sans-serif;
			margin: 0;
			padding: 0;
			background-color: #f0f0f0;
		}
		header {
			background-color: #333;
			color: #fff;
			padding: 20px;
			text-align: center;
		}
		nav {
			background-color: #444;
			padding: 10px;
			text-align: center;
		}
		nav a {
			color: #fff;
			text-decoration: none;
			padding: 10px;
		}
		nav a:hover {
			background-color: #555;
		}
		section {
			padding: 20px;
		}
		footer {
			background-color: #333;
			color: #fff;
			padding: 10px;
			text-align: center;
			position: fixed;
			bottom: 0;
			width: 100%;
		}
    </style>
</head>
<body>
	<header>
		<h1>Ezabatu fitxategia</h1>
	</header>
	<nav>
		<a href="../index.html">Return to Home</a>
	</nav>
	<section>
		<h2>About This Page</h2>
		<p>Select a file from the <code>./docs/upload/</code> directory to delete.</p>
	</section>
	<section>
		<form id="deleteForm">
			<label for="file">Enter filename to delete:</label>
			<input type="text" id="file" name="filename" placeholder="example.txt" required>
			<input type="button" value="Delete" onclick="deleteFile()">
		</form>
		<p id="response"></p>
	</section>
	<footer>
		<p>&copy; 2024 webserv. All rights reserved.</p>
	</footer>

	<script>
		async function deleteFile() {
			const filename = document.getElementById('file').value;
			const responseElement = document.getElementById('response');
	
			if (!filename) {
				responseElement.textContent = 'Please enter a filename.';
				return;
			}
	
			try {
				const response = await fetch('/upload/' + encodeURIComponent(filename), {
					method: 'DELETE',
					headers: {
						'Content-Type': 'application/json'
					}
				});
				if (response.ok) {
					// If the response is successful, redirect to the success page with a message
					const message = encodeURIComponent('File deleted successfully.');
					const result = await response.text();
					responseElement.textContent = 'File deleted successfully.' + result;
					window.location.href = `./success_delete.html?message=${message}`;
				} else {
					// Handle different error codes by redirecting to specific error pages
					const result = await response.text();
					switch (response.status) {
						case 404:
							// const result = await response.text();
							// responseElement.textContent = 'Error: ' + result;
							window.location.href = '../default_errors/error_404.html';
							break;
						case 500:
							// const result = await response.text();
							// responseElement.textContent = 'Error: ' + result;
							window.location.href = '../default_errors/error_500.html';
							break;
						default:
							// const result = await response.text();
							responseElement.textContent = 'Error: ' + result;
							// responseElement.style.color = 'red';
					}
				}
			} catch (error) {
				responseElement.textContent = 'Error: ' + error.message;
				responseElement.style.color = 'red';
			}
		}
	</script>
</body>
</html>

